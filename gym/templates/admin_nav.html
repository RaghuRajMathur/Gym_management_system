{% load static %}
<head>
  <title>Gym Sync</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="{% static 'css/admin_nav_style.css' %}" />
</head>
<nav>
        <ul class="sidebar">
          <li onclick=hideSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="26" viewBox="0 96 960 960" width="26"><path d="m249 849-42-42 231-231-231-231 42-42 231 231 231-231 42 42-231 231 231 231-42 42-231-231-231 231Z"/></svg></a></li>
          <li><a href="{% url 'admin_home' %}">Admin Home</a></li>
          <li class="dropdown">
            <a href="#">Enquiry
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewEnquiry' %}">View Enquiry</a></li>
              <li><a href="{% url 'addEnquiry' %}">Add Enquiry</a></li>
              <li><a href="{% url 'member_queries' %}">Member Enqueries</a></li>
              <li><a href="{% url 'member_queries' %}">View member queries</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#">Plan
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewPlan' %}">View Plan</a></li>
              <li><a href="{% url 'addPlan' %}">Add Plan</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#">Equipments
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewEquipment' %}">View Equipments</a></li>
              <li><a href="{% url 'addEquipment' %}">Add Equipments</a></li>
            </ul>
          </li>
          
          <li class="dropdown">
            <a href="#">Members
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewMember' %}">View Members</a></li>
              <li><a href="{% url 'addMember' %}">Add Members</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#"><i class="fa-solid fa-user"></i>
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'changePassword' %}">Change Password</a></li>
              <li><a href="{% url 'logout' %}">Logout</a></li>
            </ul>
          </li>
        </ul>

        <ul>
          <!-- ACTUAL NAVBAR  -->
          <li><a href="{% url 'index' %}"><img src="{% static 'images/gymlogo.png' %}" alt="Gym logo" class="navbar-logo"></a></li>
          <li class="hideOnMobile"><a href="{% url 'admin_home' %}">Admin Home
          </a>
          <li class="hideOnMobile dropdown">
            <a href="#">Enquiry
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewEnquiry' %}">View Enquiry</a></li>
              <li><a href="{% url 'addEnquiry' %}">Add Enquiry</a></li>
            </ul>
          </li>
          <li class="hideOnMobile dropdown">
            <a href="#">Plan
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewPlan' %}">View Plan</a></li>
              <li><a href="{% url 'addPlan' %}">Add Plan</a></li>
            </ul>
          </li>
          <li class="hideOnMobile dropdown">
            <a href="#">Equipments
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewEquipment' %}">View Equipments</a></li>
              <li><a href="{% url 'addEquipment' %}">Add Equipments</a></li>
            </ul>
          </li>
          <li class="hideOnMobile dropdown">
            <a href="#">Members
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'viewMember' %}">View Members</a></li>
              <li><a href="{% url 'addMember' %}">Add Members</a></li>
            </ul>
          </li>
          <li class="hideOnMobile dropdown">
            <a href="#"><i class="fa-solid fa-user"></i>
              <i class="fa-solid fa-chevron-down" style="font-size: 12px; margin-left: 10px;"></i>
            </a>
            <ul class="dropdown-content">
              <li><a href="{% url 'changePassword' %}">Change Password</a></li>
              <li><a href="{% url 'logout' %}">Logout</a></li>
            </ul>
          </li>
          <li class="menu-button" onclick=showSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="26" viewBox="0 96 960 960" width="26"><path d="M120 816v-60h720v60H120Zm0-210v-60h720v60H120Zm0-210v-60h720v60H120Z"/></svg></a></li>
        </ul>
      </nav>
      <script>
        // Function to show the sidebar
        function showSidebar() {
          const sidebar = document.querySelector('.sidebar');
          sidebar.style.display = 'flex';  // Ensure sidebar shows when clicked
        }
      
        // Function to hide the sidebar
        function hideSidebar() {
          const sidebar = document.querySelector('.sidebar');
          sidebar.style.display = 'none';  // Hide sidebar when clicked
        }
      
        // Close all dropdowns function (for both navbar and sidebar)
        function closeAllDropdowns() {
          document.querySelectorAll('.dropdown').forEach(dropdown => {
            dropdown.classList.remove('active');
            const dropdownContent = dropdown.querySelector('.dropdown-content');
            if (dropdownContent) {
              dropdownContent.style.display = 'none';
            }
          });
        }
      
        // Toggle dropdown for both main navbar and sidebar
        document.querySelectorAll('.dropdown > a').forEach(dropdownToggle => {
          dropdownToggle.addEventListener('click', function (e) {
            e.preventDefault();  // Prevent default link behavior
      
            const dropdown = this.parentElement;
            const dropdownContent = dropdown.querySelector('.dropdown-content');
      
            // If the dropdown is already active (open), close it
            if (dropdown.classList.contains('active')) {
              dropdown.classList.remove('active');
              if (dropdownContent) {
                dropdownContent.style.display = 'none';  // Close the dropdown
              }
            } else {
              // If it's not active, close all other dropdowns and open this one
              closeAllDropdowns();
              dropdown.classList.add('active');
              if (dropdownContent) {
                dropdownContent.style.display = 'flex';  // Open the dropdown
              }
            }
          });
        });
      
        // Close dropdowns when clicking outside of the navbar or sidebar
        document.addEventListener('click', function (e) {
          // Close all dropdowns if the click is outside the navbar, sidebar, or dropdowns
          if (!e.target.closest('nav') && !e.target.closest('.sidebar')) {
            closeAllDropdowns();
          }
        });
      
        // Add event listener to hamburger menu for showing the sidebar
        document.querySelector('.menu-button').addEventListener('click', function () {
          showSidebar();  // Show the sidebar when hamburger is clicked
        });
      
        // Ensure the sidebar can be closed by clicking on the "close" button (X)
        document.querySelector('.sidebar li a svg').addEventListener('click', function () {
          hideSidebar();  // Hide the sidebar when close button is clicked
        });
      </script>